<!DOCTYPE html>

<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Courantæ•¸è¨­å®šæ©Ÿåˆ¶åˆ†æ</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            margin: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            line-height: 1.6;
        }

```
    .container {
        max-width: 1200px;
        margin: 0 auto;
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        border-radius: 20px;
        padding: 30px;
        box-shadow: 0 8px 32px rgba(31, 38, 135, 0.37);
        border: 1px solid rgba(255, 255, 255, 0.18);
    }
    
    h1 {
        text-align: center;
        color: #ffffff;
        font-size: 2.5em;
        margin-bottom: 30px;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
    }
    
    h2 {
        color: #ffd700;
        border-bottom: 2px solid #ffd700;
        padding-bottom: 10px;
        margin-top: 40px;
    }
    
    .analysis-table {
        width: 100%;
        border-collapse: collapse;
        margin: 20px 0;
        background: rgba(255, 255, 255, 0.05);
        border-radius: 10px;
        overflow: hidden;
    }
    
    .analysis-table th {
        background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
        color: white;
        padding: 15px;
        text-align: center;
        font-weight: bold;
    }
    
    .analysis-table td {
        padding: 12px;
        text-align: center;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .analysis-table tr:hover {
        background: rgba(255, 255, 255, 0.1);
        transition: all 0.3s ease;
    }
    
    .code-box {
        background: rgba(0, 0, 0, 0.3);
        border-radius: 10px;
        padding: 15px;
        margin: 15px 0;
        font-family: 'Courier New', monospace;
        border-left: 4px solid #ffd700;
    }
    
    .highlight {
        background: linear-gradient(45deg, #ffd700, #ffed4e);
        color: #333;
        padding: 2px 6px;
        border-radius: 4px;
        font-weight: bold;
    }
    
    .comparison-section {
        background: rgba(255, 255, 255, 0.1);
        border-radius: 15px;
        padding: 20px;
        margin: 20px 0;
        border: 2px solid #ffd700;
    }
    
    .grid-container {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        margin: 20px 0;
    }
    
    .concept-card {
        background: rgba(255, 255, 255, 0.1);
        border-radius: 15px;
        padding: 20px;
        border: 1px solid rgba(255, 255, 255, 0.2);
    }
    
    .concept-card h3 {
        color: #ffd700;
        margin-top: 0;
    }
    
    .floport-style {
        background: linear-gradient(45deg, #667eea, #764ba2);
    }
    
    .lumerical-style {
        background: linear-gradient(45deg, #f093fb, #f5576c);
    }
    
    .formula {
        background: rgba(0, 0, 0, 0.4);
        padding: 10px;
        border-radius: 8px;
        font-family: monospace;
        margin: 10px 0;
    }
    
    .stability-warning {
        background: linear-gradient(45deg, #ff6b6b, #ee5a52);
        color: white;
        padding: 15px;
        border-radius: 10px;
        margin: 15px 0;
        text-align: center;
        font-weight: bold;
    }
</style>
```

</head>
<body>
    <div class="container">
        <h1>âš¡ Courantæ•¸è¨­å®šæ©Ÿåˆ¶å®Œæ•´åˆ†æ</h1>

```
    <!-- ä½ çš„åˆ†æç¢ºèª -->
    <h2>âœ… ä½ çš„åˆ†æç¢ºèª</h2>
    <div class="comparison-section">
        <h3>ğŸ¯ ä½ çš„ç†è§£100%æ­£ç¢ºï¼</h3>
        <table class="analysis-table">
            <thead>
                <tr>
                    <th>é …ç›®</th>
                    <th>ä½ çš„åˆ†æ</th>
                    <th>ç¨‹å¼ç¢¼ç¢ºèª</th>
                    <th>çµæœ</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>1. ç”¨æˆ¶è‡ªè¨‚</strong></td>
                    <td>å°æ–¼max_courant</td>
                    <td><span class="highlight">elif courant_number > max_courant_number: raise ValueError</span></td>
                    <td>âœ… æ­£ç¢º</td>
                </tr>
                <tr>
                    <td><strong>2. ç³»çµ±è‡ªå‹•</strong></td>
                    <td>0.99 Ã— max_courant</td>
                    <td><span class="highlight">self.courant_number = 0.99 * max_courant_number</span></td>
                    <td>âœ… æ­£ç¢º</td>
                </tr>
                <tr>
                    <td><strong>3. 2Dæœ€å¤§å€¼</strong></td>
                    <td>1/âˆš2 â‰ˆ 0.707</td>
                    <td><span class="highlight">max_courant_number = float(self.D) ** (-0.5)</span><br>D=2 â†’ 1/âˆš2</td>
                    <td>âœ… æ­£ç¢º</td>
                </tr>
                <tr>
                    <td><strong>4. 3Dæœ€å¤§å€¼</strong></td>
                    <td>1/âˆš3 â‰ˆ 0.577</td>
                    <td><span class="highlight">max_courant_number = float(self.D) ** (-0.5)</span><br>D=3 â†’ 1/âˆš3</td>
                    <td>âœ… æ­£ç¢º</td>
                </tr>
            </tbody>
        </table>
    </div>
    
    <!-- Floportå¯¦ä½œç´°ç¯€ -->
    <h2>ğŸ”§ Floport FDTDå¯¦ä½œç´°ç¯€</h2>
    <div class="code-box">
        <strong>Grid.__init__() ä¸­çš„Courantæ•¸é‚è¼¯ï¼š</strong><br><br>
        
        # è¨ˆç®—æ¨¡æ“¬ç¶­åº¦<br>
        self.D = int(self.Nx > 1) + int(self.Ny > 1) + int(self.Nz > 1)<br><br>
        
        # è¨ˆç®—æœ€å¤§å…è¨±Courantæ•¸<br>
        max_courant_number = float(self.D) ** (-0.5)<br><br>
        
        if courant_number is None:<br>
        &nbsp;&nbsp;&nbsp;&nbsp;# è‡ªå‹•è¨­å®šï¼šåŠ å…¥0.99ç©©å®šæ€§å› å­<br>
        &nbsp;&nbsp;&nbsp;&nbsp;self.courant_number = 0.99 * max_courant_number<br>
        elif courant_number > max_courant_number:<br>
        &nbsp;&nbsp;&nbsp;&nbsp;# æª¢æŸ¥ç”¨æˆ¶è¨­å®šæ˜¯å¦éå¤§<br>
        &nbsp;&nbsp;&nbsp;&nbsp;raise ValueError(f"courant_number {courant_number} too high")<br>
        else:<br>
        &nbsp;&nbsp;&nbsp;&nbsp;# ä½¿ç”¨ç”¨æˆ¶è¨­å®š<br>
        &nbsp;&nbsp;&nbsp;&nbsp;self.courant_number = float(courant_number)<br><br>
        
        # è¨ˆç®—æ™‚é–“æ­¥é•·<br>
        self.time_step = self.courant_number * self.grid_spacing / const.c
    </div>
    
    <!-- ç¶­åº¦èˆ‡Courantæ•¸å°æ‡‰ -->
    <h2>ğŸ“ ç¶­åº¦èˆ‡Courantæ•¸ä¸Šé™å°æ‡‰</h2>
    <table class="analysis-table">
        <thead>
            <tr>
                <th>æ¨¡æ“¬ç¶­åº¦</th>
                <th>Då€¼</th>
                <th>max_courantå…¬å¼</th>
                <th>æ•¸å€¼</th>
                <th>è‡ªå‹•è¨­å®šå€¼(Ã—0.99)</th>
                <th>ç‰©ç†æ„ç¾©</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><strong>1D</strong></td>
                <td>1</td>
                <td>1/âˆš1</td>
                <td>1.000</td>
                <td>0.990</td>
                <td>æ²¿ä¸€å€‹è»¸å‚³æ’­</td>
            </tr>
            <tr>
                <td><strong>2D</strong></td>
                <td>2</td>
                <td>1/âˆš2</td>
                <td>0.707</td>
                <td>0.700</td>
                <td>å°è§’ç·šå‚³æ’­</td>
            </tr>
            <tr>
                <td><strong>3D</strong></td>
                <td>3</td>
                <td>1/âˆš3</td>
                <td>0.577</td>
                <td>0.572</td>
                <td>ç©ºé–“å°è§’ç·šå‚³æ’­</td>
            </tr>
        </tbody>
    </table>
    
    <!-- CFLæ¢ä»¶ç‰©ç†è§£é‡‹ -->
    <h2>ğŸŒŠ CFLæ¢ä»¶ç‰©ç†è§£é‡‹</h2>
    <div class="grid-container">
        <div class="concept-card">
            <h3>ğŸ“ 2Dæƒ…æ³</h3>
            <div class="formula">
                æœ€å¿«å‚³æ’­è·¯å¾‘ï¼šå°è§’ç·š<br>
                è·é›¢ = âˆš(Î”xÂ² + Î”yÂ²) = âˆš2 Ã— Î”x<br>
                æ™‚é–“ = âˆš2 Ã— Î”x / c<br>
                <br>
                CFLæ¢ä»¶ï¼šÎ”t â‰¤ âˆš2 Ã— Î”x / c<br>
                Courant = c Ã— Î”t / Î”x â‰¤ 1/âˆš2 â‰ˆ 0.707
            </div>
        </div>
        
        <div class="concept-card">
            <h3>ğŸ“¦ 3Dæƒ…æ³</h3>
            <div class="formula">
                æœ€å¿«å‚³æ’­è·¯å¾‘ï¼šç©ºé–“å°è§’ç·š<br>
                è·é›¢ = âˆš(Î”xÂ² + Î”yÂ² + Î”zÂ²) = âˆš3 Ã— Î”x<br>
                æ™‚é–“ = âˆš3 Ã— Î”x / c<br>
                <br>
                CFLæ¢ä»¶ï¼šÎ”t â‰¤ âˆš3 Ã— Î”x / c<br>
                Courant = c Ã— Î”t / Î”x â‰¤ 1/âˆš3 â‰ˆ 0.577
            </div>
        </div>
    </div>
    
    <!-- Lumericalæ¯”è¼ƒ -->
    <h2>ğŸ”„ Lumerical vs Floportè¨­è¨ˆæ¯”è¼ƒ</h2>
    <div class="grid-container">
        <div class="concept-card floport-style">
            <h3>ğŸ”§ Floport FDTDæ–¹å¼</h3>
            <div class="formula">
                <strong>ç”¨æˆ¶å¯æ§é …ç›®ï¼š</strong><br>
                â€¢ courant_number (å¯é¸)<br>
                â€¢ grid_spacing<br>
                â€¢ æ¨¡æ“¬ç¶­åº¦<br>
                <br>
                <strong>ç³»çµ±è¨ˆç®—ï¼š</strong><br>
                â€¢ max_courant = 1/âˆšD<br>
                â€¢ ç©©å®šæ€§å› å­ = 0.99 (å›ºå®š)<br>
                â€¢ time_step = C Ã— Î”x / c<br>
                <br>
                <strong>ç‰¹é»ï¼š</strong><br>
                çµ¦ç”¨æˆ¶æœ€å¤§éˆæ´»æ€§ï¼Œä½†éœ€è¦ç†è§£CFLæ¢ä»¶
            </div>
        </div>
        
        <div class="concept-card lumerical-style">
            <h3>ğŸ’¼ Lumericalæ–¹å¼</h3>
            <div class="formula">
                <strong>ç”¨æˆ¶å¯æ§é …ç›®ï¼š</strong><br>
                â€¢ dt stability factor (0~1)<br>
                â€¢ mesh size<br>
                <br>
                <strong>ç³»çµ±å›ºå®šï¼š</strong><br>
                â€¢ max_courant (å…§éƒ¨è¨ˆç®—ï¼Œä¸å¯è¦‹)<br>
                â€¢ CFLæ¢ä»¶ (è‡ªå‹•è™•ç†)<br>
                â€¢ time_step = factor Ã— max_dt<br>
                <br>
                <strong>ç‰¹é»ï¼š</strong><br>
                ç°¡åŒ–ç”¨æˆ¶æ“ä½œï¼Œéš±è—è¤‡é›œæ€§
            </div>
        </div>
    </div>
    
    <!-- ä½ çš„ç¬¬4é»åˆ†æ -->
    <h2>ğŸ¯ ä½ çš„ç¬¬4é»åˆ†æï¼šLumericalçš„è¨­è¨ˆç­–ç•¥</h2>
    <div class="comparison-section">
        <h3>ğŸ’¡ ä½ çš„æ´å¯Ÿå®Œå…¨æ­£ç¢ºï¼</h3>
        <p><strong>Lumericalçš„è¨­è¨ˆå“²å­¸ï¼š</strong></p>
        <ul>
            <li>âœ… <strong>éš±è—è¤‡é›œæ€§</strong>ï¼šä¸è®“ç”¨æˆ¶ç›´æ¥è¨­å®šCourantæ•¸</li>
            <li>âœ… <strong>ç°¡åŒ–æ“ä½œ</strong>ï¼šåªçµ¦"dt stability factor"æ»‘æ¡¿ (0.01~0.99)</li>
            <li>âœ… <strong>é˜²å‘†è¨­è¨ˆ</strong>ï¼šç”¨æˆ¶ç„¡æ³•è¨­å®šä¸ç©©å®šçš„å€¼</li>
            <li>âœ… <strong>å›ºå®šæ¼”ç®—æ³•</strong>ï¼šmax_courantå¯«æ­»åœ¨è»Ÿé«”ä¸­</li>
            <li>âœ… <strong>æ¯”ä¾‹æ§åˆ¶</strong>ï¼šè®“ç”¨æˆ¶æ§åˆ¶"å®‰å…¨é¤˜é‡"è€Œéçµ•å°å€¼</li>
        </ul>
        
        <div class="formula">
            <strong>Lumericalå…§éƒ¨é‚è¼¯ï¼ˆæ¨æ¸¬ï¼‰ï¼š</strong><br>
            max_dt = max_courant Ã— grid_spacing / c  # å…§éƒ¨è¨ˆç®—<br>
            actual_dt = dt_stability_factor Ã— max_dt  # ç”¨æˆ¶æ§åˆ¶<br>
            <br>
            å…¶ä¸­ dt_stability_factor å°±æ˜¯ä½ èªªçš„"0.99é€™å€‹æ¯”ä¾‹"
        </div>
    </div>
    
    <!-- è¨­è¨ˆæ¯”è¼ƒç¸½çµ -->
    <h2>ğŸ“Š å…©ç¨®è¨­è¨ˆç­–ç•¥æ¯”è¼ƒ</h2>
    <table class="analysis-table">
        <thead>
            <tr>
                <th>æ¯”è¼ƒé …ç›®</th>
                <th>Floportæ–¹å¼</th>
                <th>Lumericalæ–¹å¼</th>
                <th>å„ªç¼ºé»</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><strong>ç”¨æˆ¶æ§åˆ¶</strong></td>
                <td>ç›´æ¥è¨­å®šCourantæ•¸</td>
                <td>è¨­å®šç©©å®šæ€§å› å­</td>
                <td>Floportæ›´éˆæ´»ï¼ŒLumericalæ›´å®‰å…¨</td>
            </tr>
            <tr>
                <td><strong>å­¸ç¿’é–€æª»</strong></td>
                <td>éœ€ç†è§£CFLæ¢ä»¶</td>
                <td>åªéœ€ç†è§£"è¶Šå°è¶Šç©©å®š"</td>
                <td>Lumericalå°æ–°æ‰‹å‹å–„</td>
            </tr>
            <tr>
                <td><strong>éŒ¯èª¤é é˜²</strong></td>
                <td>å¯èƒ½è¨­å®šä¸ç©©å®šå€¼</td>
                <td>ä¸å¯èƒ½è¨­å®šä¸ç©©å®šå€¼</td>
                <td>Lumericalæ›´é˜²å‘†</td>
            </tr>
            <tr>
                <td><strong>é€æ˜åº¦</strong></td>
                <td>æ‰€æœ‰è¨ˆç®—å…¬é–‹</td>
                <td>å…§éƒ¨è¨ˆç®—éš±è—</td>
                <td>Floportæ›´é€æ˜</td>
            </tr>
            <tr>
                <td><strong>é©ç”¨å°è±¡</strong></td>
                <td>ç ”ç©¶è€…ã€é–‹ç™¼è€…</td>
                <td>å·¥ç¨‹å¸«ã€æ‡‰ç”¨è€…</td>
                <td>ä¸åŒå®šä½</td>
            </tr>
        </tbody>
    </table>
    
    <div class="stability-warning">
        ğŸ¯ ç¸½çµï¼šä½ å®Œå…¨ç†è§£äº†å…©ç¨®è»Ÿé«”çš„è¨­è¨ˆå“²å­¸å·®ç•°ï¼<br>
        Floporté‡è¦–æ•™è‚²å’Œé€æ˜ï¼ŒLumericalé‡è¦–æ˜“ç”¨å’Œå®‰å…¨ã€‚
    </div>
</div>
```

</body>
</html>